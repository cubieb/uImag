!function(e){function t(t,i){function n(t){if(e.isArray(ae.readonly)){var i=e(".dwwl",B).index(t);return ae.readonly[i]}return ae.readonly}function d(e){var t,i='<div class="dw-bf">',n=1;for(t in le[e])n%20==0&&(i+='</div><div class="dw-bf">'),i+='<div class="dw-li dw-v" data-val="'+t+'" style="height:'+_+"px;line-height:"+_+'px;"><div class="dw-i">'+le[e][t]+"</div></div>",n++,console.log(t);return i+="</div>"}function o(t){c=e(".dw-li",t).index(e(".dw-v",t).eq(0)),w=e(".dw-li",t).index(e(".dw-v",t).eq(-1)),b=e(".dw-ul",B).index(t),u=_,h=te}function D(){te.temp=ue&&null!==te.val&&te.val!=se.val()||null===te.values?ae.parseValue(se.val()||"",te):te.values.slice(0),te.setValue(!0)}function O(t,i,n,s,a){!1!==Y("validate",[B,i,t])&&(e(".dw-ul",B).each(function(n){var d=e(this),l=e('.dw-li[data-val="'+te.temp[n]+'"]',d),o=e(".dw-li",d),r=o.index(l),u=o.length,c=n==i||void 0===i;if(!l.hasClass("dw-v")){for(var w=l,h=l,f=0,v=0;r-f>=0&&!w.hasClass("dw-v");)f++,w=o.eq(r-f);for(;r+v<u&&!h.hasClass("dw-v");)v++,h=o.eq(r+v);(v<f&&v&&2!==s||!f||r-f<0||1==s)&&h.hasClass("dw-v")?(l=h,r+=v):(l=w,r-=f)}l.hasClass("dw-sel")&&!c||(te.temp[n]=l.attr("data-val"),e(".dw-sel",d).removeClass("dw-sel"),l.addClass("dw-sel"),te.scroll(d,n,r,c?t:.1,c?a:void 0))}),te.change(n))}function I(t){if(!("inline"==ae.display||Q===e(window).width()&&G===e(window).height()&&t)){var i,n,s,a,d,l,o,r,u,c,w,h,f=0,v=0,p=e(window).scrollTop(),b=e(".dwwr",B),m=e(".dw",B),g={},y=void 0===ae.anchor?se:ae.anchor;Q=e(window).width(),G=e(window).height(),U=window.innerHeight,U=U||G,/modal|bubble/.test(ae.display)&&(e(".dwc",B).each(function(){i=e(this).outerWidth(!0),f+=i,v=i>v?i:v}),i=f>Q?v:f,b.width(i)),J=m.outerWidth(),K=m.outerHeight(!0),"modal"==ae.display?(n=(Q-J)/2,s=p+(U-K)/2):"bubble"==ae.display?(h=!0,u=e(".dw-arrw-i",B),o=(l=y.offset()).top,r=l.left,a=y.outerWidth(),d=y.outerHeight(),n=(n=(n=r-(m.outerWidth(!0)-a)/2)>Q-J?Q-(J+20):n)>=0?n:20,(s=o-K)<p||o>p+U?(m.removeClass("dw-bubble-top").addClass("dw-bubble-bottom"),s=o+d):m.removeClass("dw-bubble-bottom").addClass("dw-bubble-top"),c=u.outerWidth(),w=r+a/2-(n+(J-c)/2),e(".dw-arr",B).css({left:w>c?c:w})):(g.width="100%","top"==ae.display?s=p:"bottom"==ae.display&&(s=p+U-K)),g.top=s<0?0:s,g.left=n,m.css(g),e(".dw-persp",B).height(0).height(s+K>e(document).height()?s+K:e(document).height()),h&&(s+K>p+U||o>p+U)&&e(window).scrollTop(s+K-U)}}function R(e){if("touchstart"===e.type)M=!0,setTimeout(function(){M=!1},500);else if(M)return M=!1,!1;return!0}function Y(t,n){var s;return n.push(te),e.each([$.defaults,de,i],function(e,i){i[t]&&(s=i[t].apply(ne,n))}),s}function E(e){var t=+e.data("pos")+1;l(e,t>w?c:t,1,!0)}function F(e){var t=+e.data("pos")-1;l(e,t<c?w:t,2,!0)}var H,_,X,B,Q,U,G,J,K,N,Z,$,ee,te=this,ie=e.mobiscroll,ne=t,se=e(ne),ae=W({},j),de={},le=[],oe={},re={},ue=se.is("input"),ce=!1;te.enable=function(){ae.disabled=!1,ue&&se.prop("disabled",!1)},te.disable=function(){ae.disabled=!0,ue&&se.prop("disabled",!0)},te.scroll=function(e,t,i,n,s){function a(e,t,i,n){return i*Math.sin(e/n*(Math.PI/2))+t}function d(){clearInterval(oe[t]),delete oe[t],e.data("pos",i).closest(".dwwl").removeClass("dwa")}var l,o=(H-i)*_;o==re[t]&&oe[t]||(n&&o!=re[t]&&Y("onAnimStart",[B,t,n]),re[t]=o,e.attr("style",S+"-transition:all "+(n?n.toFixed(3):0)+"s ease-out;"+(P?S+"-transform:translate3d(0,"+o+"px,0);":"top:"+o+"px;")),oe[t]&&d(),n&&void 0!==s?(l=0,e.closest(".dwwl").addClass("dwa"),oe[t]=setInterval(function(){l+=.1,e.data("pos",Math.round(a(l,s,i-s,n))),l>=n&&d()},100)):e.data("pos",i))},te.setValue=function(t,i,n,s){e.isArray(te.temp)||(te.temp=ae.parseValue(te.temp+"",te)),ce&&t&&O(n),X=ae.formatResult(te.temp),s||(te.values=te.temp.slice(0),te.val=X),i&&ue&&se.val(X).trigger("change")},te.getValues=function(){var e,t=[];for(e in te._selectedValues)t.push(te._selectedValues[e]);return t},te.validate=function(e,t,i,n){O(i,e,!0,t,n)},te.change=function(e){X=ae.formatResult(te.temp),"inline"==ae.display&&te.setValue(!1,e),e&&Y("onChange",[X])},te.changeWheel=function(t,i){if(B){var n,s,a=0,l=t.length;for(n in ae.wheels)for(s in ae.wheels[n]){if(e.inArray(a,t)>-1&&(le[a]=ae.wheels[n][s],e(".dw-ul",B).eq(a).html(d(a)),!--l))return I(),void O(i,void 0,!0);a++}}},te.isVisible=function(){return ce},te.tap=function(e,t){var i,n;ae.tap&&e.bind("touchstart",function(e){e.preventDefault(),i=s(e,"X"),n=s(e,"Y")}).bind("touchend",function(e){Math.abs(s(e,"X")-i)<20&&Math.abs(s(e,"Y")-n)<20&&t.call(this,e),V=!0,setTimeout(function(){V=!1},300)}),e.bind("click",function(e){V||t.call(this,e)})},te.show=function(t){if(ae.disabled||ce)return!1;"top"==ae.display&&(N="slidedown"),"bottom"==ae.display&&(N="slideup"),D(),Y("onBeforeShow",[B]);var i,a,u=0,c="";N&&!t&&(c="dw-"+N+" dw-in");var w='<div class="dw-trans '+ae.theme+" dw-"+ae.display+'">'+("inline"==ae.display?'<div class="dw dwbg dwi"><div class="dwwr">':'<div class="dw-persp"><div class="dwo"></div><div class="dw dwbg '+c+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div><div class="dwwr">'+(ae.headerText?"<div></div>":""));for(i=0;i<ae.wheels.length;i++){w+='<div class="dwc'+("scroller"!=ae.mode?" dwpm":" dwsc")+(ae.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';for(a in ae.wheels[i])le[u]=ae.wheels[i][a],w+='<td><div class="dwwl dwrc dwwl'+u+'">'+("scroller"!=ae.mode?'<div class="dwwb dwwbp" style="height:'+_+"px;line-height:"+_+'px;"><span>+</span></div><div class="dwwb dwwbm" style="height:'+_+"px;line-height:"+_+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+a+'</div><div class="dww" style="height:'+ae.rows*_+"px;min-width:"+ae.width+'px;"><div class="dw-ul">',w+=d(u),w+='</div><div class="dwwo"></div></div><div class="dwwol"></div></div></td>',w+="<td>è‡³</td>",u++;w+="</tr></table></div></div>"}w+=("inline"!=ae.display?'<div class="dwbc'+(ae.button3?" dwbc-p":"")+'"><span class="dwbw dwb-s"><span class="dwb">'+ae.setText+"</span></span>"+(ae.button3?'<span class="dwbw dwb-n"><span class="dwb">'+ae.button3Text+"</span></span>":"")+'<span class="dwbw dwb-c"><span class="dwb">'+ae.cancelText+"</span></span></div></div>":'<div class="dwcc"></div>')+"</div></div></div>",B=e(w),O(),Y("onMarkupReady",[B]),"inline"!=ae.display?(B.appendTo("body"),setTimeout(function(){B.removeClass("dw-trans").find(".dw").removeClass(c)},350)):se.is("div")?se.html(B):B.insertAfter(se),Y("onMarkupInserted",[B]),ce=!0,$.init(B,te),"inline"!=ae.display&&(te.tap(e(".dwb-s span",B),function(){!1!==te.hide(!1,"set")&&(te.setValue(!1,!0),Y("onSelect",[te.val]))}),te.tap(e(".dwb-c span",B),function(){te.cancel()}),ae.button3&&te.tap(e(".dwb-n span",B),ae.button3),ae.scrollLock&&B.bind("touchmove",function(e){K<=U&&J<=Q&&e.preventDefault()}),e("input,select,button").each(function(){e(this).prop("disabled")||e(this).addClass("dwtd").prop("disabled",!0)}),I(),e(window).bind("resize.dw",function(){clearTimeout(Z),Z=setTimeout(function(){I(!0)},100)})),B.delegate(".dwwl","DOMMouseScroll mousewheel",function(t){if(!n(this)){t.preventDefault();var i=(t=t.originalEvent).wheelDelta?t.wheelDelta/120:t.detail?-t.detail/3:0,s=e(".dw-ul",this),a=+s.data("pos"),d=Math.round(a-i);o(s),l(s,d,i<0?1:2)}}).delegate(".dwb, .dwwb",q,function(t){e(this).addClass("dwb-a")}).delegate(".dwwb",q,function(t){t.stopPropagation(),t.preventDefault();var i=e(this).closest(".dwwl");if(R(t)&&!n(i)&&!i.hasClass("dwa")){v=!0;var s=i.find(".dw-ul"),a=e(this).hasClass("dwwbp")?E:F;o(s),clearInterval(r),r=setInterval(function(){a(s)},ae.delay),a(s)}}).delegate(".dwwl",q,function(t){t.preventDefault(),!R(t)||f||n(this)||v||(f=!0,e(document).bind(A,L),p=e(".dw-ul",this),T="clickpick"!=ae.mode,C=+p.data("pos"),o(p),x=void 0!==oe[b],m=s(t,"Y"),y=new Date,g=m,te.scroll(p,b,C,.001),T&&p.closest(".dwwl").addClass("dwa"))}),Y("onShow",[B,X])},te.hide=function(t,i){if(!ce||!1===Y("onClose",[X,i]))return!1;e(".dwtd").prop("disabled",!1).removeClass("dwtd"),se.blur(),B&&("inline"!=ae.display&&N&&!t?(B.addClass("dw-trans").find(".dw").addClass("dw-"+N+" dw-out"),setTimeout(function(){B.remove(),B=null},350)):(B.remove(),B=null),ce=!1,re={},e(window).unbind(".dw"))},te.cancel=function(){!1!==te.hide(!1,"cancel")&&Y("onCancel",[te.val])},te.init=function(e){$=W({defaults:{},init:k},ie.themes[e.theme||ae.theme]),ee=ie.i18n[e.lang||ae.lang],W(i,e),W(ae,$.defaults,ee,i),te.settings=ae,se.unbind(".dw");var t=ie.presets[ae.preset];t&&(de=t.call(ne,te),W(ae,de,i),W(z,de.methods)),H=Math.floor(ae.rows/2),_=ae.height,N=ae.animate,void 0!==se.data("dwro")&&(ne.readOnly=a(se.data("dwro"))),ce&&te.hide(),"inline"==ae.display?te.show():(D(),ue&&ae.showOnFocus&&(se.data("dwro",ne.readOnly),ne.readOnly=!0,se.bind("focus.dw",function(){te.show()})))},te.trigger=function(e,t){return Y(e,t)},te.values=null,te.val=null,te.temp=null,te._selectedValues={},te.init(i)}function i(e){var t;for(t in e)if(void 0!==I[e[t]])return!0;return!1}function n(e){return D[e.id]}function s(e,t){var i=e.originalEvent,n=e.changedTouches;return n||i&&i.changedTouches?i?i.changedTouches[0]["page"+t]:n[0]["page"+t]:e["page"+t]}function a(e){return!0===e||"true"==e}function d(e,t,i){return e=e>i?i:e,e=e<t?t:e}function l(t,i,n,s,a){i=d(i,c,w);var l=e(".dw-li",t).eq(i),o=void 0===a?i:a,r=b,u=s?i==o?.1:Math.abs(.1*(i-o)):0;h.temp[r]=l.attr("data-val"),h.scroll(t,r,i,u,a),setTimeout(function(){h.validate(r,n,u,a)},10)}function o(e,t,i){return z[t]?z[t].apply(e,Array.prototype.slice.call(i,1)):"object"==typeof t?z.init.call(e,t):e}var r,u,c,w,h,f,v,p,b,m,g,y,C,x,T,V,M,D={},k=function(){},O=(new Date).getTime(),I=document.createElement("modernizr").style,P=i(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),S=function(){var e,t=["Webkit","Moz","O","ms"];for(e in t)if(i([t[e]+"Transform"]))return"-"+t[e].toLowerCase();return""}(),W=e.extend,q="touchstart mousedown",A="touchmove mousemove",L=function(e){T&&(e.preventDefault(),g=s(e,"Y"),h.scroll(p,b,d(C+(m-g)/u,c-1,w+1))),x=!0},j={width:360,height:100,rows:3,delay:300,disabled:!1,readonly:!1,showOnFocus:!0,showLabel:!0,wheels:[],theme:"",headerText:"{value}",display:"modal",mode:"scroller",preset:"",lang:"en-US",setText:"Set",cancelText:"Cancel",scrollLock:!0,tap:!0,formatResult:function(e){return e.join(" ")},parseValue:function(e,t){var i,n,s,a=t.settings.wheels,d=e.split(" "),l=[],o=0;for(i=0;i<a.length;i++)for(n in a[i]){if(void 0!==a[i][n][d[o]])l.push(d[o]);else for(s in a[i][n]){l.push(s);break}o++}return l}},z={init:function(e){return void 0===e&&(e={}),this.each(function(){this.id||(O+=1,this.id="scoller"+O),D[this.id]=new t(this,e)})},enable:function(){return this.each(function(){var e=n(this);e&&e.enable()})},disable:function(){return this.each(function(){var e=n(this);e&&e.disable()})},isDisabled:function(){var e=n(this[0]);if(e)return e.settings.disabled},isVisible:function(){var e=n(this[0]);if(e)return e.isVisible()},option:function(e,t){return this.each(function(){var i=n(this);if(i){var s={};"object"==typeof e?s=e:s[e]=t,i.init(s)}})},setValue:function(e,t,i,s){return this.each(function(){var a=n(this);a&&(a.temp=e,a.setValue(!0,t,i,s))})},getInst:function(){return n(this[0])},getValue:function(){var e=n(this[0]);if(e)return e.values},getValues:function(){var e=n(this[0]);if(e)return e.getValues()},show:function(){var e=n(this[0]);if(e)return e.show()},hide:function(){return this.each(function(){var e=n(this);e&&e.hide()})},destroy:function(){return this.each(function(){var t=n(this);t&&(t.hide(),e(this).unbind(".dw"),delete D[this.id],e(this).is("input")&&(this.readOnly=a(e(this).data("dwro"))))})}};e(document).bind("touchend mouseup",function(t){if(f){var i,n,s,a=new Date-y,o=d(C+(m-g)/u,c-1,w+1),b=p.offset().top;if(a<300?(n=(i=(g-m)/a)*i/.0012,g-m<0&&(n=-n)):n=g-m,s=Math.round(C-n/u),!n&&!x){var V=Math.floor((g-b)/u),M=e(".dw-li",p).eq(V),D=T;!1!==h.trigger("onValueTap",[M])?s=V:D=!0,D&&(M.addClass("dw-hl"),setTimeout(function(){M.removeClass("dw-hl")},200))}T&&l(p,s,0,!0,Math.round(o)),f=!1,p=null,e(document).unbind(A,L)}v&&(clearInterval(r),v=!1),e(".dwb-a").removeClass("dwb-a")}).bind("mouseover mouseup mousedown click",function(e){if(V)return e.stopPropagation(),e.preventDefault(),!1}),e.fn.mobiscroll=function(t){return W(this,e.mobiscroll.shorts),o(this,t,arguments)},e.mobiscroll=e.mobiscroll||{setDefaults:function(e){W(j,e)},presetShort:function(e){this.shorts[e]=function(t){return o(this,W(t,{preset:e}),arguments)}},shorts:{},presets:{},themes:{},i18n:{}},e.scroller=e.scroller||e.mobiscroll,e.fn.scroller=e.fn.scroller||e.fn.mobiscroll}(jQuery);