!function(r){r.fn.loadingRing=function(){function s(){if((m+=1)>90&&(m=90,clearInterval(f)),console.log(m),r(".progress-ring>.progress-text>.progress-num").text(m),e.find(".progress-left").css({transform:"rotate("+3.6*i+"deg)","-o-transform":"rotate("+3.6*i+"deg)","-ms-transform":"rotate("+3.6*i+"deg)","-moz-transform":"rotate("+3.6*i+"deg)","-webkit-transform":"rotate("+3.6*i+"deg)",transition:"transform "+g+"ms linear","-o-transition":"-o-transform "+g+"ms linear","-ms-transition":"-ms-transform "+g+"ms linear","-moz-transition":"-moz-transform "+g+"ms linear","-webkit-transition":"-webkit-transform "+g+"ms linear"}),i>50){var s="toggle "+50*g/i+"ms";e.find(".progress-right").css({opacity:1,animation:s,"animation-timing-function":"step-end"}),e.find(".progress-cover").css({opacity:0,animation:s,"animation-timing-function":"step-start"})}i>=90&&m>=90&&1==++c&&(i=90,m=90,console.log("哈哈"),e.find(".progress-left").stop(!0,!1),r.ajax({type:"POST",url:"/cgi-bin/sys_setting.cgi",async:!1,data:"update_sys=update",error:function(){console.log("刷入开发板flash......失败！")},success:function(s){if(console.log(s),console.log("刷入开发板flash......成功！"),"updateSuccess"==s){console.log("向服务端请求，一直等待是否要刷入flash的信息");setInterval(function(){if(m<100){r(".progress-ring>.progress-text>.progress-num").text(100),i=100,g=100,e.find(".progress-left").css({transform:"rotate("+3.6*i+"deg)","-o-transform":"rotate("+3.6*i+"deg)","-ms-transform":"rotate("+3.6*i+"deg)","-moz-transform":"rotate("+3.6*i+"deg)","-webkit-transform":"rotate("+3.6*i+"deg)",transition:"transform "+g+"ms linear","-o-transition":"-o-transform "+g+"ms linear","-ms-transition":"-ms-transform "+g+"ms linear","-moz-transition":"-moz-transform "+g+"ms linear","-webkit-transition":"-webkit-transform "+g+"ms linear"});var s="toggle "+50*g/i+"ms";e.find(".progress-right").css({opacity:1,animation:s,"animation-timing-function":"step-end"}),e.find(".progress-cover").css({opacity:0,animation:s,"animation-timing-function":"step-start"})}},100);window.location.href="system_update_reboot_result.html"}}}))}var t,o,n={trackColor:"#f0f0f0",progressColor:"#6ec84e",percent:0,duration:1500},e=r(this),a=e.data("color"),i=parseInt(e.data("percent"),10),g=1e3*parseFloat(e.data("duration"),10),c=0;if(a&&2===a.split(",").length){var l=a.split(",");t=l[0],o=l[1]}else t=n.trackColor,o=n.progressColor;i||(i=n.percent),g||(g=n.duration),e.append('<div class="progress-track"></div><div class="progress-left"></div><div class="progress-right"></div><div class="progress-cover"></div><div class="progress-text"><span class="progress-num">'+i+'</span><span class="progress-percent">%</span></div>');e.find(".progress-cover").height();e.find(".progress-track, .progress-cover").css("border-color",t),e.find(".progress-left, .progress-right").css("border-color",o);var m=0,f=setInterval(s,100);return e.find(".progress-left")}}(jQuery);