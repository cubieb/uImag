$(function(){!function(){var i=localStorage.getItem("scanWifi");console.log(i),scanEntity=JSON.parse(i);var e=template("listTmp",scanEntity);$("#selectCon").html(e),console.log("点击下拉按钮之前渲染本地数据到页面成功"),$("#wifi-list>.wifi-name>.wifi-l").text(scanEntity.Scan[0].ssid),$("#wifi-list>.wifi-password>input[type='text']").attr("placeholder",'请输入"'+scanEntity.Scan[0].ssid+'"的密码');var s=scanEntity.Scan[0];wifiData="Channel="+s.Channel+"&ssid="+s.ssid+"&bssid="+s.bssid+"&security="+s.security+"&signal="+s.signal+"&mode="+s.mode+"&ext_ch="+s.ext_ch+"&net_type="+s.net_type+"&wps="+s.wps,console.log("成功获取被点击的wifi的相关信息："+wifiData),ssidName=s.ssid,console.log("获取了被点击的wifi名:"+ssidName),$("#wifi-list>.wifi-amplifier>#newWifiName").val(ssidName+"-Plus"),$("#wifi-list>.amplifier-password>#newPassword").attr("placeholder","请输入"+ssidName+"-Plus的密码"),$("#wifi-list>.wifi-password>input[type='text']").on("input",function(){$("#wifi-list>.amplifier-password>#newPassword").val($("#wifi-list>.wifi-password>input[type='text']").val())}),$("#wifi-list>.wifi-amplifier>#newWifiName").on("input",function(){$("#wifi-list>.amplifier-password>#newPassword").attr("placeholder","请输入"+$("#wifi-list>.wifi-amplifier>#newWifiName").val()+"的密码")})}(),$("header>.nav-back").on("click",function(){window.history.go(-1)}),$("#wifi-list>.wifi-name>.wifi-r>.list-btn").on("click",function(i){var e=localStorage.getItem("scanWifi");scanEntity=JSON.parse(e),console.log(scanEntity);var s=template("listTmp",scanEntity);$("#selectCon").html(s),console.log(s),console.log("将模板数据渲染到页面成功"),i.stopPropagation(),$("#selectCon").select()}),$("#wifi-list>.wifi-name>.wifi-r>.refresh-btn").on("click",function(i){$.ajax({url:"/cgi-bin/wifi_setting.cgi",type:"POST",data:"wifiScan=Scan",async:!1,success:function(i){var e=JSON.parse(i),s=template("listTmp",e);$("#selectCon").html(s),console.log(s);var o=JSON.stringify(e);localStorage.setItem("scanWifi",o),console.log(localStorage),console.log("刷新按钮获取服务器的wifi列表数据成功")}}),i.stopPropagation(),$(".selectContainer").select()}),$("#wifi-form>#wifi-list>.same-password>.cBox").on("click",function(){$(this).find("input[type='checkbox']").prop("checked")?$("#wifi-list>.password-management").hide(300):$("#wifi-list>.password-management").show(300)}),$("#wifi-form>#wifi-list>#next-bnt").click(function(){$("#wifi-form").valid()&&($.ajax({type:"POST",url:"/cgi-bin/wifi_setting.cgi",data:"wifiCommit=commit&"+wifiData+"&"+$("#wifi-form").serialize(),async:!0,error:function(i){console.log("提交表单失败服务端返回的数据"+i),console.log("Connection error"),console.log("提交表单数据失败")},success:function(i){console.log("提交表单数据成功后服务端返回的数据"+i),console.log("提交表单数据成功")}}),window.location.href="configuration.html")}),$("#wifi-form").validate({rules:{wifiPassword:{emptyCheck:!0,manageCodeCheck:!0},newPassword:{emptyCheck:!0,manageCodeCheck:!0},managePassword:{emptyCheck:!0,manageCodeCheck:!0}},messages:{wifiPassword:{emptyCheck:"输入不能为空",manageCodeCheck:"有效密码为8-64位字符"},newPassword:{emptyCheck:"输入不能为空",manageCodeCheck:"有效密码为8-64位字符"},managePassword:{emptyCheck:"输入不能为空",manageCodeCheck:"有效密码为8-64位字符"}},success:function(i){i.parent().parent().css({"border-color":"#ddd"})},errorPlacement:function(i,e){console.log(e),console.log(i),i.appendTo(e.siblings("p")),e.parent().css({"border-color":"#EE2222"})}})});