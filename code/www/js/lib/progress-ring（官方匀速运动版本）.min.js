!function(r){r.fn.loadingRing=function(){function s(){if((m+=1)>90&&(m=90,clearInterval(f)),console.log(m),r(".progress-ring>.progress-text>.progress-num").text(m),e.find(".progress-left").css({transform:"rotate("+3.6*i+"deg)","-o-transform":"rotate("+3.6*i+"deg)","-ms-transform":"rotate("+3.6*i+"deg)","-moz-transform":"rotate("+3.6*i+"deg)","-webkit-transform":"rotate("+3.6*i+"deg)",transition:"transform "+c+"ms linear","-o-transition":"-o-transform "+c+"ms linear","-ms-transition":"-ms-transform "+c+"ms linear","-moz-transition":"-moz-transform "+c+"ms linear","-webkit-transition":"-webkit-transform "+c+"ms linear"}),i>50){var s="toggle "+50*c/i+"ms";e.find(".progress-right").css({opacity:1,animation:s,"animation-timing-function":"step-end"}),e.find(".progress-cover").css({opacity:0,animation:s,"animation-timing-function":"step-start"})}i>=90&&m>=90&&(i=90,m=90,console.log("哈哈"),e.find(".progress-left").stop(!0,!1),r.ajax({type:"POST",url:"/cgi-bin/sys_setting.cgi",async:!1,data:"update_success=success",error:function(){console.log("刷入开发板flash成功......失败！")},success:function(s){console.log(s),console.log("刷入开发板flash成功......成功！"),"update_success"==s&&(i=90,m=90,setTimeout(function(){console.log("向服务端请求，一直等待是否要刷入flash的信息");setInterval(function(){if(m<100){m+=1,r(".progress-ring>.progress-text>.progress-num").text(m),i=100,c=600,e.find(".progress-left").css({transform:"rotate("+3.6*i+"deg)","-o-transform":"rotate("+3.6*i+"deg)","-ms-transform":"rotate("+3.6*i+"deg)","-moz-transform":"rotate("+3.6*i+"deg)","-webkit-transform":"rotate("+3.6*i+"deg)",transition:"transform "+c+"ms linear","-o-transition":"-o-transform "+c+"ms linear","-ms-transition":"-ms-transform "+c+"ms linear","-moz-transition":"-moz-transform "+c+"ms linear","-webkit-transition":"-webkit-transform "+c+"ms linear"});var s="toggle "+50*c/i+"ms";e.find(".progress-right").css({opacity:1,animation:s,"animation-timing-function":"step-end"}),e.find(".progress-cover").css({opacity:0,animation:s,"animation-timing-function":"step-start"})}},600)},4e3))}}))}var t,o,n={trackColor:"#f0f0f0",progressColor:"#6ec84e",percent:0,duration:1500},e=r(this),a=e.data("color"),i=parseInt(e.data("percent"),10),c=1e3*parseFloat(e.data("duration"),10);if(a&&2===a.split(",").length){var g=a.split(",");t=g[0],o=g[1]}else t=n.trackColor,o=n.progressColor;i||(i=n.percent),c||(c=n.duration),e.append('<div class="progress-track"></div><div class="progress-left"></div><div class="progress-right"></div><div class="progress-cover"></div><div class="progress-text"><span class="progress-num">'+i+'</span><span class="progress-percent">%</span></div>');e.find(".progress-cover").height();e.find(".progress-track, .progress-cover").css("border-color",t),e.find(".progress-left, .progress-right").css("border-color",o);var m=0,f=setInterval(s,600);return e.find(".progress-left")}}(jQuery);