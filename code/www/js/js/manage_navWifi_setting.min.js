$(function(){if($("header>.nav-back").on("click",function(){window.history.go(-1)}),!$.isEmptyObject(JSON.parse(localStorage.getItem("ChosenWifi")))){var e=localStorage.getItem("ChosenWifi");obj=JSON.parse(e),console.log(obj),$("#newWifiName").val(obj.newWifiName),$("#newPassword").val(obj.newPassword),$("#managePassword").val(obj.newPassword);var o=JSON.parse(localStorage.getItem("OtherChosen")),n=$.isEmptyObject(o);console.log(n),n?$("#newPassword").val()==obj.wifiPwd?$("#samePassword").prop("checked",!0):$("#samePassword").prop("checked",!1):$("#newPassword").val()==o.wifiPwd?$("#samePassword").prop("checked",!0):$("#samePassword").prop("checked",!1);var a=$(obj.id);console.log(a),a.prop("checked",!0)}$("#samePassword").parent().on("click",function(){console.log($(this));var e=$(this).find("input[type='checkbox']").prop("checked");console.log(e),e?$("#managePassword").val(obj.newPassword):$("#newPassword").val(obj.newPassword)}),$("#managePwd").parent().on("click",function(){console.log($(this));var e=$(this).find("input[type='checkbox']").prop("checked");console.log(e),e?$(".online-info-managesamePWD").get(0).style.display="block":($(".online-info-managesamePWD").get(0).style.display="none",$("#newPassword").val(obj.newPassword))});var s="throughWall",i="true";$("#pattern>.online-info-pattern").find("label").on("click",function(){i=$(this).find("input[type='radio']").prop("checked"),console.log(i),s=$(this).find("input[type='radio']").attr("id"),console.log(s)}),$("#main>form").validate({rules:{newWifiName:{emptyCheck:!0,minlength:1,maxlength:26},newPassword:{emptyCheck:!0,manageCodeCheck:!0}},messages:{newWifiName:{emptyCheck:"输入不能为空"},newPassword:{emptyCheck:"输入不能为空",manageCodeCheck:"有效密码为8-64位字符"}},success:function(e){},errorPlacement:function(e,o){console.log(o),console.log(e),e.appendTo(o.siblings("p"))}}),$("#main>form>button>a").on("click",function(){var e=$("#main>form").valid();return console.log(e),e&&$.ajax({type:"POST",url:"/cgi-bin/wifi_setting.cgi",data:"ex_station=station&samePasswordChecked="+$("#samePassword").prop("checked")+"&managePwd="+$("#managePwd").prop("checked")+"&"+s+"="+i+"&"+$("#main>form").serialize(),error:function(e){console.log("提交当前路由设置信息失败")},success:function(e){console.log(e),console.log("提交当前wifi设置信息成功");var o={};o.newWifiName=$("#newWifiName").val(),o.newPassword=$("#newPassword").val(),o.wzcheckedVal=$("#samePassword").prop("checked"),o.wmcheckedVal=$("#managePwd").prop("checked"),$("#pattern .online-info-pattern label").on("click",function(){if(1==$(this).find("input[type='radio']").prop("checked")){var e=$(this).find("input[type='radio']").attr("id");o.id=e}}),console.log(o);var n=JSON.stringify(o);localStorage.setItem("ChosenWifi",n),"wifiSuccess"==e&&$.ajax({type:"POST",url:"/cgi-bin/sys_setting.cgi",data:"reboot_sys=reboot",error:function(){console.log("开始重启系统......失败！")},success:function(e){console.log("开始重启系统......成功！"),console.log(e),"reboot"==e&&(window.location.href="syetem_reboot_progress.html")}})}}),!1})});